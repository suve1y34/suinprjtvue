/* Bookshelf container */
.shelf{
  --shelf-row-height: 180px;   /* 책등 높이 */
  --shelf-gap-x: 4px;          /* 기본 좌우 간격 */
  --shelf-gap-y: 10px;         /* 선반 간 세로 간격 */
  display: grid;
  grid-template-columns: repeat(6, minmax(0, 1fr)); /* 기본: 6열 */
  column-gap: 0px !important;
  row-gap: var(--shelf-gap-y);
  align-items: end;
  align-content: start;
  line-height: 0;
  position: relative;
}
.shelf::before{
  content:"";
  position:absolute; inset:0;
  pointer-events:none;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent 178px,          /* 책등 높이 근처(시각 맞춤) */
      rgba(0,0,0,.06) 178px,
      rgba(0,0,0,.06) 180px,      /* 얇은 선 */
      transparent 180px,
      transparent 190px           /* 선반 간격(행 간 간격 포함) */
    );
  z-index: 0;
}
.shelf--tight{
  column-gap: 0;               /* 책 간격 거의 0 */
}
.shelf__cell{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-end;
  padding: 0 !important;
}
.shelf--tight .shelf__cell{
  padding: 0;                  /* 진짜 '붙어있는' 느낌 */
}

/* 목재 선반 효과 */
.shelf--wood{
  /* 선반 색상 */
  --wood:      #d8c3a8;
  --wood-dark: #c7ab8a;
  --lip-shadow: rgba(0,0,0,.14);

  background:
    /* 선반 판넬 */
    linear-gradient(
      to bottom,
      var(--wood) 0,
      var(--wood) var(--shelf-row-height),
      transparent var(--shelf-row-height),
      transparent calc(var(--shelf-row-height) + var(--shelf-gap-y))
    );
  background-size: 100% calc(var(--shelf-row-height) + var(--shelf-gap-y));
  background-repeat: repeat-y;
  position: relative;
}

/* 선반 하단 그림자(립) */
.shelf--wood::before{
  content:"";
  position:absolute; inset:0;
  background:
    repeating-linear-gradient(
      to bottom,
      transparent 0,
      transparent calc(var(--shelf-row-height) - 2px),
      var(--lip-shadow) calc(var(--shelf-row-height) - 2px),
      var(--lip-shadow) var(--shelf-row-height),
      transparent var(--shelf-row-height),
      transparent calc(var(--shelf-row-height) + var(--shelf-gap-y))
    );
  pointer-events:none;
}

/* 중앙 정렬 옵션 */
.shelf--center{ margin-left:auto; margin-right:auto; }

/* 래퍼 */
.shelf-wrap{
  display:flex; justify-content:center; align-items:center;
  min-height: calc(100vh - 140px);
  padding: 12px 0;
}

/* Book spine */
.spine{
  position:relative;
  z-index: 1;
  height: var(--shelf-row-height);
  display:inline-flex;
  vertical-align:bottom;
  align-items:center;
  justify-content:center;
  writing-mode:vertical-rl;
  text-orientation:mixed;
  border-radius:2px;
  overflow:hidden;
  cursor:pointer;
  user-select:none;
  border: 0 !important;
  box-shadow: none !important;
  margin: 0 !important;
}

/* 테마별 변형 */
.spine--dark{    background: var(--color-ink);   color:#f0f0f0; }
.spine--dark-2{  background: var(--color-ink-2); color:#f0f0f0; }
.spine--accent{  background: var(--color-accent); color:#fff; }
.spine--light{   background: var(--color-surface); color: var(--color-ink); }

.spine__title{
  font-size:12px;
  line-height:1.1;
  max-height:92%;
  display:-webkit-box;
  -webkit-line-clamp:12;
  -webkit-box-orient:vertical;
  white-space:normal;
  overflow:hidden;
}

/* 진행도 퍼센트 */
.spine__progress{
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 11px;
  line-height: 1;
  opacity: .85;
  pointer-events: none;
}

/* 상태 배지 */
.badge{
  position:absolute; top:4px; right:4px;
  font-size:10px; padding:2px 4px; border-radius:3px;
  background:#eee; color:#222; line-height:1;
  pointer-events:none;
}
.badge--plan{    background:#fff; border:1px solid var(--color-brand); color:var(--color-ink); }
.badge--reading{ background: var(--color-accent); color:#fff; }
.badge--done{    background: var(--color-ink); color:#fff; }

/* 스켈레톤 */
.spine--skeleton{
  position: relative;
  height: var(--shelf-row-height);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  writing-mode: vertical-rl;
  border-radius: 2px;
  overflow: hidden;
  border: 1px solid rgba(0,0,0,0.08);
  background: linear-gradient(90deg, #f2f2f2 25%, #f7f7f7 37%, #f2f2f2 63%);
  background-size: 400% 100%;
  animation: shimmer 1.2s ease-in-out infinite;
}
.badge--skeleton{
  position: absolute; top: 4px; right: 4px;
  width: 28px; height: 12px; border-radius: 3px;
  background: rgba(255,255,255,.4);
}
@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 반응형 열 수 */
@media (min-width: 768px)  { .shelf{ grid-template-columns: repeat(8,  minmax(0, 1fr)); } }
@media (min-width: 1024px) { .shelf{ grid-template-columns: repeat(10, minmax(0, 1fr)); } }
@media (min-width: 1280px) { .shelf{ grid-template-columns: repeat(12, minmax(0, 1fr)); } }